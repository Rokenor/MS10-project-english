{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  // ====== Mobile menu ======\n  const openBtn = document.querySelector('[data-menu-open]');\n  const closeBtn = document.querySelector('[data-menu-close]');\n  const menu = document.querySelector('[data-menu]');\n  const mobileLinks = document.querySelectorAll('.mobile-nav-link');\n  const navLinks = document.querySelectorAll('.nav-link');\n\n  let pauseSpyUntil = 0;\n  let lockedId = null;\n\n  function startScrollLock() {\n    document.documentElement.classList.add('is-scrolling');\n\n    clearTimeout(window.__scrollSpyTimer);\n    window.__scrollSpyTimer = setTimeout(() => {\n      document.documentElement.classList.remove('is-scrolling');\n    }, 400);\n  }\n\n  function openMenu() {\n    if (!menu) return;\n    menu.classList.add('is-open');\n    document.body.classList.add('no-scroll');\n    openBtn?.setAttribute('aria-expanded', 'true');\n  }\n\n  function closeMenu() {\n    if (!menu) return;\n    menu.classList.remove('is-open');\n    document.body.classList.remove('no-scroll');\n    openBtn?.setAttribute('aria-expanded', 'false');\n  }\n\n  if (openBtn && closeBtn && menu) {\n    openBtn.addEventListener('click', openMenu);\n    closeBtn.addEventListener('click', closeMenu);\n    mobileLinks.forEach(link => link.addEventListener('click', closeMenu));\n  }\n\n  navLinks.forEach(link => {\n    link.addEventListener('click', e => {\n      const href = link.getAttribute('href');\n      if (!href || !href.startsWith('#')) return;\n\n      const id = href.slice(1);\n\n      lockedId = id;\n      setActive(id);\n\n      startScrollLock();\n      pauseSpyUntil = Date.now() + 1200;\n    });\n  });\n\n  // ====== Scroll Spy ======\n  if (!navLinks.length) {\n    console.warn('ScrollSpy: .nav-link not found');\n    return;\n  }\n\n  // Build list of section ids from nav links\n  const ids = [...navLinks]\n    .map(a => a.getAttribute('href'))\n    .filter(href => href && href.startsWith('#'))\n    .map(href => href.slice(1));\n\n  const sections = ids.map(id => document.getElementById(id)).filter(Boolean);\n\n  console.log('ScrollSpy ids:', ids);\n  console.log(\n    'ScrollSpy sections found:',\n    sections.map(s => s.id)\n  );\n\n  if (!sections.length) {\n    console.warn(\n      \"ScrollSpy: No sections found. Add matching id's in your partials (about, lessons, teachers, reviews, contact).\"\n    );\n    return;\n  }\n\n  function setActive(id) {\n    navLinks.forEach(l => {\n      if (l.getAttribute('href') === `#${id}`) {\n        l.classList.add('current');\n      } else {\n        l.classList.remove('current');\n      }\n    });\n  }\n\n  // Pick active section based on scroll position\n  const header = document.querySelector('.header');\n  const headerOffset = header ? header.offsetHeight : 0;\n  \n  function handleHeaderScroll() {\n    if (!header) return;\n\n    if (window.scrollY > 10) {\n      header.classList.add('is-scrolled');\n    } else {\n      header.classList.remove('is-scrolled');\n    }\n  }\n\n  function onScroll() {\n    if (lockedId) {\n      const el = document.getElementById(lockedId);\n      if (el) {\n        const y = window.scrollY + headerOffset + 2;\n\n        if (y >= el.offsetTop) {\n          lockedId = null;\n        } else {\n          return; \n        }\n      } else {\n        lockedId = null;\n      }\n    }\n\n    if (Date.now() < pauseSpyUntil) return;\n    const scrollY = window.scrollY + window.innerHeight / 2;\n\n    const pageBottom =\n      window.innerHeight + window.scrollY >=\n      document.documentElement.scrollHeight - 10;\n\n    // If we are at the bottom â†’ activate last section (Contact)\n    if (pageBottom) {\n      setActive(sections[sections.length - 1].id);\n      return;\n    }\n\n    let currentId = sections[0].id;\n\n    for (const section of sections) {\n      if (section.offsetTop <= scrollY) {\n        currentId = section.id;\n      }\n    }\n    setActive(currentId);\n  }\n\n  window.addEventListener('scroll', () => {\n    onScroll();\n    handleHeaderScroll();\n  }, { passive: true });\n  \n  });\n"],"names":["openBtn","closeBtn","menu","mobileLinks","navLinks","pauseSpyUntil","lockedId","startScrollLock","openMenu","closeMenu","link","e","href","id","setActive","ids","a","sections","s","l","header","headerOffset","handleHeaderScroll","onScroll","el","scrollY","currentId","section"],"mappings":"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"}